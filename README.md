# QuickMPC
[![Build CC, MC, DC, and Run Build and Test in Each Containers](https://github.com/acompany-develop/QuickMPC/actions/workflows/main.yml/badge.svg?branch=develop)](https://github.com/acompany-develop/QuickMPC/actions/workflows/main.yml)

<img src="https://user-images.githubusercontent.com/1694907/182115030-90fda7cf-068a-48bb-ba50-ee12be6af0b4.png" width=128>

[Japanese version](./README-ja.md)

A practical engine for Secure Multiparty Computation (SMPC) that is part of privacy-enhancing computation (PEC). QuickMPC can perform computations on personal data used in fundamental static calculations and light machine learning while keeping confidentiality.

This will enable businesses and engineers worldwide to use Python and JavaScript (TypeScript) client libraries to easily develop SaaS products that utilize SMPC functions without the need for expert SMPC knowledge.

![oss_eg](https://user-images.githubusercontent.com/1694907/182254973-ee3092a6-ee28-49bb-aaf6-637225271a0b.png)

## Getting Started
[The demonstration with QuickMPC-libClient-py](/QuickMPC-libClient-py/demo/README.md)

## Dependent Tools/Commands
- `make`
- `docker`
- `docker-compose`

## Development Requirements
### Recommended

- memory: `16 GB`
- storage: `20 GB`

## Run all test suite
1. Change your current directory into `Test/`
```sh
cd QuickMPC/Test
```
2. Launch all containers
```sh
make debug t=./ManageContainer
```
3. Execute libClient Demo
- libClient-ts(https://github.com/acompany-develop/QuickMPC-libClient-ts/tree/develop/Demo/Develop)
- libClient-py(https://github.com/acompany-develop/QuickMPC-libClient-py/tree/develop/Demo)

## How to test each container
Detail: https://github.com/acompany-develop/QuickMPC/tree/develop/Test
1. Change your current directory into `Test/`
```sh
cd QuickMPC/Test
```
2. Run test
```sh
# Testing all containers
make test
# Only the Computation Container test
make test t=./ComputationContainer/
# Only the Manage Container test
make test t=./ManageContainer/
# Only the Db Container test
make test t=./DbContainer/
```

## How to start each container
This section is usefule when you want to stand 3 containers and dare to test manually.
```sh
make debug t=./ComputationContainer # Launch of the dev_cc{1,2,3}, dev_debgate{1,2,3}, dev_sharedb{1,2,3}, dev_secrets-server
make debug t=./DbContainer # Launch of the dev_debgate{1,2,3}, dev_sharedb{1,2,3}, dev_secrets-server
make debug t=./ManageContainer # Then, all container is launched
```

## How to develop each container
### Computation Container
Detail: https://github.com/acompany-develop/QuickMPC/tree/develop/src/ComputationContainer#readme
1. Change your current directory
```sh
cd src/ComputationContainer
```
2. Start the container and enter the container
```sh
make upd
make login
cd QuickMPC
```

1. Develop and bulid and test
```sh
# build
bazel build //:all
# test
bazel test ... --test_env=IS_TEST=true --test_output=errors
```

#### Delete temporary files generated by Bazel
The files generated by bazel can be removed by running the following in the `/QuickMPC` directory in the container

```
bazel clean
```

### Manage Container

Detail: https://github.com/acompany-develop/QuickMPC/tree/develop/src/ManageContainer#readme
1. Change your current directory
```sh
cd src/ManageContainer
```
2. Start the container and enter the container
```sh
make upd
make login
```
3. Develop and bulid and test
```sh
# Create a vendor directory directly under QuickMPC and copy all dependent packages
go mod vendor
# build
go build
# test
go test ... -v
```

### Db Container
It consists of DbGate and DB.

### Dbgate
Detail: https://github.com/acompany-develop/QuickMPC/tree/develop/src/DbContainer
1. Change your current directory
```sh
cd src/DbContainer
```
2. Start the container and enter the container
```sh
make upd
make login
```
3. Develop and bulid and test
```sh
# Create a vendor directory directly under QuickMPC and copy all dependent packages
go mod vendor
# build
go build
# test
go test ... -v
```
### DB
Detail https://github.com/acompany-develop/QuickMPC/tree/develop/src/DbContainer/Db#readme
#### Enter the Couchbase Server's administration page
Access http://localhost:8091 and create buckets
In the development environment, the following settings are assumed and implemented.
```bash
username: <`CB_USERNAME` created by secrets-server>
password: <`CB_PASSWORD` created by secrets-server>
bucket: share
```

#### Try Query
Access http://localhost:8091/ui/index.html#!/query/workbench?scenarioZoom=minute
Example
```
CREATE PRIMARY INDEX share_sample_index ON `share`;
SELECT * FROM `share`;
```
